---
title: Problembehandlung von DirectAccess
description: Dieses Thema enthält Informationen zur Problembehandlung von DirectAccess-bereit Stellungen in Windows Server 2016.
manager: brianlic
ms.prod: windows-server
ms.technology: networking-da
ms.topic: article
ms.assetid: 61040e19-5960-4eb0-b612-d710627988f7
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 73549a03d1e2417604618ea79c2bdb03d56aba72
ms.sourcegitcommit: acfdb7b2ad283d74f526972b47c371de903d2a3d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/05/2020
ms.locfileid: "87769288"
---
# <a name="troubleshooting-directaccess"></a>Problembehandlung von DirectAccess

>Gilt für: Windows Server (halbjährlicher Kanal), Windows Server 2016

Führen Sie die folgenden Schritte aus, um Probleme mit dem Remote Zugriff (DirectAccess) zu beheben.

|**Problem**|**Lösung**|
|--|--|
|Die DirectAccess-Konfiguration kann von der Remote Zugriffs-Verwaltungskonsole nicht angezeigt werden.|**So stellen Sie fehlende Konfigurationsinformationen wieder her**<br />-Wenn Sie die Problembehandlung bei einer Bereitstellung mit mehreren Standorten durchlaufen, stellen Sie sicher, dass der dem Einstiegspunkt am nächsten liegenden Domänen Controller<br />-Verwenden Sie das Cmdlet **Get-daentrypointdc** , um den Namen des Domänen Controllers abzurufen, der dem Einstiegspunkt am nächsten ist. Wenn der Domänen Controller nicht ausgeführt wird, verwenden Sie das Cmdlet **Set-daentrypointdc** , um auf einen anderen Domänen Controller zu verweisen.<br />-Führen Sie **gpresult** über eine Eingabeaufforderung mit erhöhten Rechten auf dem Server aus, um sicherzustellen, dass der Server die DirectAccess-Gruppenrichtlinie Objekte erhält.<br />-Aktivieren Sie die Protokollierung der Benutzeroberfläche.<br />-Verwenden Sie den folgenden Befehl, um die Windows PowerShell-Protokollierung zu starten:<pre>logman create trace ETWTrace -ow -o c:\ETWTrace.etl -p {AAD4C46D-56DE-4F98-BDA2-B5EAEBDD2B04} 0xffffffffffffffff 0xff -nb 16 16 -bs 1024 -mode 0x2 -max 2048 -ets <br />logman update trace ETWTrace -p {62DFF3DA-7513-4FCA-BC73-25B111FBB1DB} 0xffffffffffffffff 0xff -ets</pre><repro>-Schließen und öffnen Sie die Benutzeroberfläche erneut.<br />-Deaktivieren der Windows PowerShell-Protokollierung. Sammeln Sie die Protokolldateien der Ereignis Ablauf Verfolgung. Erfassen Sie außerdem alle Protokolle aus dem Ordner " **% windir%/Tracing** ".|
|Fehler beim Anwenden der DirectAccess-Konfiguration|**So aktualisieren Sie die DirectAccess-Konfiguration**<br />-Wenn Sie die Problembehandlung bei einer Bereitstellung mit mehreren Standorten durchlaufen, stellen Sie sicher, dass der dem Einstiegspunkt am nächsten liegenden Domänen Controller<br />-Verwenden Sie das Cmdlet **Get-daentrypointdc** , um den Namen des Domänen Controllers abzurufen, der dem Einstiegspunkt am nächsten ist. Wenn der Domänen Controller nicht ausgeführt wird, verwenden Sie das Cmdlet **Set-daentrypointdc** , um auf einen anderen Domänen Controller zu verweisen.<br />-Verwenden Sie den folgenden Befehl, um die Windows PowerShell-Protokollierung zu starten:<br /><pre>logman create trace ETWTrace -ow -o c:\ETWTrace.etl -p {AAD4C46D-56DE-4F98-BDA2-B5EAEBDD2B04} 0xffffffffffffffff 0xff -nb 16 16 -bs 1024 -mode 0x2 -max 2048 -ets<br />logman update trace ETWTrace -p {62DFF3DA-7513-4FCA-BC73-25B111FBB1DB} 0xffffffffffffffff 0xff -ets</pre>    <repro><br />-Klicken **Sie**auf übernehmen.<br />-Wenn der Fehler auftritt, deaktivieren Sie die Windows PowerShell-Protokollierung, und erfassen Sie das Ereignis Ablauf Verfolgungs Protokoll.|
|DirectAccess ist konfiguriert, Clients können jedoch keine Verbindung mit internen Ressourcen herstellen.|**So beheben Sie Probleme mit der Client Verbindung**<br />-Klicken Sie in der Remote Zugriffs-Verwaltungskonsole auf die Registerkarte **Betriebs Status** , und vergewissern Sie sich, dass alle Komponenten ein grünes Symbol aufweisen. Falls nicht, überprüfen Sie die Fehlerdetails, und führen Sie die Lösungsschritte aus.<br />-Führen Sie den Remote Zugriffs Server-Best Practices Analyzer (BPA) aus. Wenn Warnungen oder Fehler vorliegen, führen Sie die Lösungsschritte aus, um das Problem zu beheben.|
|Probleme im Zusammenhang mit einer Konfiguration für mehrere Standorte (z. b. Aktivieren einer Multisite, Hinzufügen von Einstiegspunkten oder Festlegen des Domänen Controllers für einen Einstiegspunkt)|Befolgen Sie die Schritte unter Problembehandlung bei [einer Bereitstellung für mehrere Standorte](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/jj554657(v=ws.11)).|
|Die Kachel Konfigurations Status auf dem Dashboard zeigt eine Warnung oder einen Fehler an.|Befolgen Sie die Schritte unter [Überwachen des Konfigurations Verteilungs Status des Remote Zugriffs Servers](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/jj574221(v=ws.11)).|
|Probleme im Zusammenhang mit der Konfiguration des Lasten Ausgleichs (z. b. bei der Konfiguration tritt ein Fehler auf, wenn Sie einen Lastenausgleich aktivieren oder wenn beim Hinzufügen oder Entfernen von Servern zu einem Cluster Probleme auftreten)|Wenn Sie den Lastenausgleich aktivieren oder einen Knoten hinzufügen und die Konfiguration aktualisiert wurde, als Sie auf **anwenden**geklickt haben, der Cluster wurde jedoch auf dem Server nicht ordnungsgemäß ausgeführt. führen Sie den folgenden Befehl aus: **cmd.exe/c "reg Add hklm\system\currentcontrolset\services\ramgmtsvc\parameters/f/v Debugflag/t REG_DWORD/d" "0xffffffff" "** ", um die Protokolle der Benutzeroberfläche auf dem neuen Server zu erfassen.|
|Der Vorgangs Status zeigt nach den folgenden Schritten einen Fehler oder eine Warnung an, um die Situation zu beheben|Wenn der Vorgangs Status falsche Informationen anzeigt (z. b. Fehler, auch nachdem Sie diese behoben haben), gilt Folgendes:<p>-Aktivieren Sie den Registrierungsschlüssel **cmd.exe/c "reg Add hklm\system\currentcontrolset\services\ramgmzvc\parameters/f/v EnableTracing/t REG_DWORD/d" "5" "**".<br />-Aktualisieren Sie den Vorgangs Status, und erfassen Sie die Protokolle von **% windir%/Tracing**.|
|Die DirectAccess-Client Computer unter Windows 8 und höher melden "kein Internet" als Status für die DirectAccess-Verbindung, und die Netzwerkkonnektivitätsstatus-Anzeige meldet eingeschränkte Konnektivität.|Dies kann vorkommen, wenn die Tunnel Erzwingung in der DirectAccess-Konfiguration aktiviert ist und daher nur IPHTTPS verwendet werden. Um dieses Problem zu beheben, können Sie einen Proxy Server erstellen und konfigurieren. Ncsi verwendet dann den Proxy Server zum Durchführen von Überprüfungen der Internet Konnektivität. Es wird empfohlen, dass Sie der Richtlinien Tabelle für die Namensauflösung (Name Resolution Policy Table, NRPT) mithilfe des folgenden Verfahrens einen statischen Proxy hinzufügen.<p>Bevor Sie die Befehle in diesem Verfahren ausführen, müssen Sie sicherstellen, dass alle Domänen Namen, Computernamen und anderen Windows PowerShell-Befehls Variablen durch Werte ersetzt werden, die für die Bereitstellung geeignet sind.<p>**Konfigurieren eines statischen Proxys für eine NRPT-Regel**<br />1. zeigen Sie das "." an. NRPT-Regel:`Get-DnsClientNrptRule -GpoName "corp.example.com\DirectAccess Client Settings" -Server <DomainControllerNetBIOSName>`<br />2. Notieren Sie sich den Namen (GUID) der "." NRPT-Regel. Der Name (GUID) sollte mit " **da-{..}** " beginnen.<br />3. Legen Sie den Proxy für "." fest. NRPT-Regel für **Proxy.Corp.example.com:8080**:`Set-DnsClientNrptRule -Name "DA-{..}" -Server <DomainControllerNetBIOSName> -GPOName "corp.example.com\DirectAccess Client Settings" -DAProxyServerName "proxy.corp.example.com:8080" -DAProxyType "UseProxyName"`<br />4. zeigen Sie das "." an. Die NRPT-Regel wird erneut ausgeführt, indem Sie Ausführen `Get-DnsClientNrptRule` und überprüfen, ob **proxysqdn: Port** jetzt ordnungsgemäß konfiguriert ist.<br />5. aktualisieren `gpupdate /force` Sie Gruppenrichtlinie, indem Sie auf einem DirectAccess-Client ausführen, wenn der Client intern verbunden ist. zeigen Sie dann die NRPT mithilfe von an, `Get-DnsClientNrptPolicy` und überprüfen Sie, ob die "."-Regel **proxysqdn: Port**anzeigt.|
